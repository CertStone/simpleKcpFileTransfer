# Simple KCP File Transfer

ç®€å•çš„åŸºäº KCP åè®®çš„é«˜é€Ÿæ–‡ä»¶ä¼ è¾“å·¥å…·ã€‚

> **å£°æ˜**ï¼šè¯¥é¡¹ç›®çš„åˆè¡·æ˜¯å®ç°ç±»ä¼¼ `python -m http.server` é‚£æ ·çš„**ç®€å•**çš„æ–‡ä»¶ä¼ è¾“å·¥å…·ï¼Œæ‰€ä»¥ä¸ä¼šä¸ºå…¶å¢åŠ å¤ªå¤æ‚çš„åŠŸèƒ½ï¼Œå¦‚æœéœ€è¦åƒæ˜¯SFTPé‚£æ ·çš„å®¢æˆ·ç«¯å’ŒæœåŠ¡ç«¯åŒå‘ä¼ è¾“çš„å·¥å…·ï¼Œè¯·å‚è€ƒ<a href="https://github.com/CertStone/simpleKcpFileManager">simpleKcpFileManager</a>

## âœ¨ ç‰¹æ€§

- **KCP åè®®**ï¼šåŸºäº UDP çš„å¯é ä¼ è¾“ï¼Œæ¯” TCP æ›´å¿«ï¼Œé€‚åˆé«˜å»¶è¿Ÿã€é«˜ä¸¢åŒ…ç½‘ç»œ
- **å¤šçº¿ç¨‹ä¸‹è½½**ï¼š8 çº¿ç¨‹å¹¶è¡Œåˆ†å—ä¸‹è½½ï¼Œå……åˆ†åˆ©ç”¨å¸¦å®½
- **æ–­ç‚¹ç»­ä¼ **ï¼šæ”¯æŒæš‚åœ/æ¢å¤ï¼Œæ„å¤–ä¸­æ–­åå¯ç»§ç»­ä¸‹è½½
- **å®Œæ•´æ€§æ ¡éªŒ**ï¼šSHA256 æ ¡éªŒç¡®ä¿æ–‡ä»¶å®Œæ•´æ— æŸ
- **åŠ å¯†ä¼ è¾“**ï¼šAES åŠ å¯†ä¿æŠ¤æ•°æ®å®‰å…¨
- **æ–‡ä»¶å¤¹ä¸‹è½½**ï¼šæ”¯æŒé€’å½’ä¸‹è½½æ•´ä¸ªæ–‡ä»¶å¤¹
- **è·¨å¹³å°**ï¼šæ”¯æŒ Windowsã€Linuxï¼ˆamd64/arm64ï¼‰
- **åŒæ¨¡å¼**ï¼šGUI å›¾å½¢ç•Œé¢ + CLI å‘½ä»¤è¡Œ

## ğŸ—ï¸ æŠ€æœ¯å®ç°

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      Application                        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                    HTTP Protocol                        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                  smux (Multiplexing)                    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚              KCP (Reliable UDP Transport)               â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                        UDP                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

- **ä¼ è¾“å±‚**ï¼š[KCP](https://github.com/skywind3000/kcp) - å¿«é€Ÿå¯é çš„ ARQ åè®®
- **å¤šè·¯å¤ç”¨**ï¼š[smux](https://github.com/xtaci/smux) - åœ¨å•ä¸ª KCP è¿æ¥ä¸Šå¤ç”¨å¤šä¸ªæµ
- **åº”ç”¨å±‚**ï¼šæ ‡å‡† HTTP åè®®ï¼Œæ”¯æŒ Range è¯·æ±‚å®ç°åˆ†å—ä¸‹è½½
- **GUI æ¡†æ¶**ï¼š[Fyne](https://fyne.io/) - Go è¯­è¨€è·¨å¹³å° GUI åº“

### KCP ä¼˜åŒ–é…ç½®

é‡‡ç”¨ç±»ä¼¼ kcptun `fast3` æ¨¡å¼çš„æ¿€è¿›é…ç½®ï¼š
- çª—å£å¤§å°ï¼š1024
- NoDelay æ¨¡å¼ï¼šå¯ç”¨
- é—´éš”ï¼š10ms
- é‡ä¼ ï¼š2 æ¬¡
- NCï¼š1ï¼ˆæ— æ‹¥å¡æ§åˆ¶ï¼‰

## ğŸ“¦ å®‰è£…

### ä» Release ä¸‹è½½

å‰å¾€ [Releases](../../releases) é¡µé¢ä¸‹è½½å¯¹åº”å¹³å°çš„é¢„ç¼–è¯‘äºŒè¿›åˆ¶æ–‡ä»¶ã€‚

### ä»æºç ç¼–è¯‘

```bash
# å…‹éš†ä»“åº“
git clone https://github.com/CertStone/simpleKcpFileTransfer.git
cd simpleKcpFileTransfer

# å®‰è£…ä¾èµ–
go mod tidy

# ç¼–è¯‘å½“å‰å¹³å°çš„å®¢æˆ·ç«¯
go build -o client/client ./client

# ç¼–è¯‘å½“å‰å¹³å°çš„æœåŠ¡ç«¯
go build -o server/server ./server
```

#### æ‰¹é‡äº¤å‰ç¼–è¯‘

```bash
# Linux/macOS
./scripts/build.sh

# Windows PowerShell
.\scripts\build.ps1
```

## ğŸš€ ä½¿ç”¨æ–¹æ³•

### æœåŠ¡ç«¯

```bash
# é»˜è®¤å¯åŠ¨ï¼Œç›‘å¬ 8080 ç«¯å£ï¼Œå…±äº«å½“å‰ç›®å½•
./server

# æŒ‡å®šå…±äº«ç›®å½•å’Œç«¯å£
./server -p 8080 -d /path/to/share

# æŒ‡å®šè‡ªå®šä¹‰åŠ å¯†å¯†é’¥
./server -p 8080 -d /path/to/share -key "my-secret-key"
```

å‚æ•°è¯´æ˜ï¼š
- `-p`ï¼šç›‘å¬ç«¯å£ï¼ˆé»˜è®¤ 8080ï¼‰
- `-d`ï¼šå…±äº«ç›®å½•ï¼ˆé»˜è®¤å½“å‰ç›®å½•ï¼‰
- `-key`ï¼šåŠ å¯†å¯†é’¥ï¼ˆé»˜è®¤ä½¿ç”¨å†…ç½®å¯†é’¥ï¼Œç”Ÿäº§ç¯å¢ƒå»ºè®®è‡ªå®šä¹‰ï¼‰

### å®¢æˆ·ç«¯

#### GUI æ¨¡å¼ï¼ˆé»˜è®¤ï¼‰

```bash
./client
```

1. è¾“å…¥æœåŠ¡å™¨åœ°å€ï¼ˆå¦‚ `192.168.1.100:8080`ï¼‰
2. ç‚¹å‡» **Connect** è¿æ¥æœåŠ¡å™¨
3. æµè§ˆæ–‡ä»¶åˆ—è¡¨ï¼Œé€‰æ‹©æ–‡ä»¶æˆ–æ–‡ä»¶å¤¹
4. ç‚¹å‡» **Download File** æˆ– **Download Folder** å¼€å§‹ä¸‹è½½

#### CLI æ¨¡å¼

```bash
# ä¸‹è½½å•ä¸ªæ–‡ä»¶
./client -cli -addr 192.168.1.100:8080 -url /video.mp4 -out ./downloads

# æŒ‡å®šå¹¶è¡Œæ•°
./client -cli -addr 192.168.1.100:8080 -url /large.zip -workers 8

# ä½¿ç”¨è‡ªå®šä¹‰å¯†é’¥è¿æ¥
./client -cli -addr 192.168.1.100:8080 -url /video.mp4 -key "my-secret-key"
```

å‚æ•°è¯´æ˜ï¼š
- `-cli`ï¼šå¯ç”¨å‘½ä»¤è¡Œæ¨¡å¼
- `-addr`ï¼šæœåŠ¡å™¨åœ°å€ï¼ˆé»˜è®¤ `127.0.0.1:8080`ï¼‰
- `-url`ï¼šè¿œç¨‹æ–‡ä»¶è·¯å¾„
- `-out`ï¼šä¿å­˜ç›®å½•ï¼ˆé»˜è®¤ `./download`ï¼‰
- `-workers`ï¼šå¹¶è¡Œä¸‹è½½çº¿ç¨‹æ•°ï¼ˆé»˜è®¤ 8ï¼‰
- `-key`ï¼šåŠ å¯†å¯†é’¥ï¼ˆé»˜è®¤ä½¿ç”¨å†…ç½®å¯†é’¥ï¼‰

## ğŸ“¸ æˆªå›¾

![å®¢æˆ·ç«¯ GUI ç•Œé¢](./docs/screenshot1.png)

## âš™ï¸ é…ç½®

### åŠ å¯†å¯†é’¥

å¯ä»¥é€šè¿‡å‘½ä»¤è¡Œå‚æ•° `-key` æŒ‡å®šè‡ªå®šä¹‰å¯†é’¥ã€‚

**æœåŠ¡ç«¯ï¼š**
```bash
# ä½¿ç”¨è‡ªå®šä¹‰å¯†é’¥å¯åŠ¨
./server -key "your-custom-key"

# ä½¿ç”¨é»˜è®¤å¯†é’¥æ—¶ä¼šæ˜¾ç¤ºè­¦å‘Š
./server
# [WARNING] Using default encryption key. For production use, please specify a custom key with -key parameter!
```

**å®¢æˆ·ç«¯ï¼š**
```bash
# CLI æ¨¡å¼æŒ‡å®šå¯†é’¥
./client -cli -key "your-custom-key" -addr 192.168.1.100:8080 -url /file.zip

# GUI æ¨¡å¼æŒ‡å®šå¯†é’¥
./client -key "your-custom-key"
```

åœ¨ GUI æ¨¡å¼ä¸‹ï¼Œå¦‚æœè¿æ¥å¤±è´¥ï¼ˆå¯èƒ½æ˜¯å¯†é’¥ä¸åŒ¹é…ï¼‰ï¼Œä¼šè‡ªåŠ¨å¼¹å‡ºå¯¹è¯æ¡†è®©ç”¨æˆ·è¾“å…¥å¯†é’¥ã€‚

é»˜è®¤å¯†é’¥å®šä¹‰åœ¨ `common/kcp.go`ï¼š

```go
const (
    Salt       = "kcp-file-transfer"
    DefaultKey = "your-secret-key"
)
```

**ç”Ÿäº§ç¯å¢ƒå»ºè®®ä½¿ç”¨ `-key` å‚æ•°æŒ‡å®šè‡ªå®šä¹‰å¯†é’¥ï¼**

### æ€§èƒ½è°ƒä¼˜

åœ¨ `client/main.go` ä¸­å¯è°ƒæ•´ï¼š

```go
const (
    defaultWorkers   = 8              // å¹¶è¡Œä¸‹è½½çº¿ç¨‹æ•°
    defaultChunkSize = 4 * 1024 * 1024 // æ¯ä¸ªåˆ†å—å¤§å° (4MB)
    maxParallelTasks = 3              // æœ€å¤§åŒæ—¶ä¸‹è½½ä»»åŠ¡æ•°
)
```

## ğŸ”§ å¼€å‘

### é¡¹ç›®ç»“æ„

```
simpleKcpFileTransfer/
â”œâ”€â”€ client/
â”‚   â””â”€â”€ main.go          # å®¢æˆ·ç«¯ï¼ˆGUI + CLIï¼‰
â”œâ”€â”€ server/
â”‚   â””â”€â”€ main.go          # æœåŠ¡ç«¯
â”œâ”€â”€ common/
â”‚   â””â”€â”€ kcp.go           # å…±äº«çš„ KCP/smux é…ç½®
â”œâ”€â”€ scripts/
â”‚   â”œâ”€â”€ build.sh         # Linux/macOS ç¼–è¯‘è„šæœ¬
â”‚   â””â”€â”€ build.ps1        # Windows ç¼–è¯‘è„šæœ¬
â”œâ”€â”€ docs/
â”‚   â””â”€â”€ screenshot1.png  # æˆªå›¾
â”œâ”€â”€ go.mod
â”œâ”€â”€ go.sum
â””â”€â”€ README.md
```

### ä¾èµ–

- [fyne.io/fyne/v2](https://github.com/fyne-io/fyne) - è·¨å¹³å° GUI
- [github.com/xtaci/kcp-go/v5](https://github.com/xtaci/kcp-go) - KCP å®ç°
- [github.com/xtaci/smux](https://github.com/xtaci/smux) - æµå¤šè·¯å¤ç”¨
- [golang.org/x/crypto](https://golang.org/x/crypto) - åŠ å¯†åº“

## ğŸ“„ License

MIT License

## ğŸ™ è‡´è°¢

- [xtaci/kcp-go](https://github.com/xtaci/kcp-go) - ä¼˜ç§€çš„ KCP Go å®ç°
- [xtaci/kcptun](https://github.com/xtaci/kcptun) - KCP éš§é“ï¼Œæœ¬é¡¹ç›®å‚è€ƒäº†å…¶é…ç½®
- [fyne-io/fyne](https://github.com/fyne-io/fyne) - ç®€æ´çš„ Go GUI æ¡†æ¶
- GPT-5.1-Codex-Max ä¸ Claude Opus 4.5 - ä»£ç ç”Ÿæˆä¸ä¼˜åŒ–
